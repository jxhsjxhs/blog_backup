<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>docker运行容器后agetty进程cpu占用率100% | jame_xhs&#39;s blog</title>
  <meta name="keywords" content=" docker ">
  <meta name="description" content="docker运行容器后agetty进程cpu占用率100% | jame_xhs&#39;s blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="个人介绍一名来自湖北武汉的运维开发工程师，个人爱好很多，比如算法，单片机（创业方向：少儿编程），Linux内核 python，以及很多很多的东西。但是都不怎么专，半桶水的样子。 希望以后一直在运维行业内呆着。可能写一些自己平台。或者好用的工具。但是自己的定位还是运维。  短期计划1.尝试深入理解Linux内核，独立编写一个简单的内核 2.一周两个算法AJ题目。持续下去 3.一周看四个小时以上的书">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://www.jxhs.me/about/index.html">
<meta property="og:site_name" content="jame_xhs&#39;s blog">
<meta property="og:description" content="个人介绍一名来自湖北武汉的运维开发工程师，个人爱好很多，比如算法，单片机（创业方向：少儿编程），Linux内核 python，以及很多很多的东西。但是都不怎么专，半桶水的样子。 希望以后一直在运维行业内呆着。可能写一些自己平台。或者好用的工具。但是自己的定位还是运维。  短期计划1.尝试深入理解Linux内核，独立编写一个简单的内核 2.一周两个算法AJ题目。持续下去 3.一周看四个小时以上的书">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-11-15T07:55:04.503Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="about">
<meta name="twitter:description" content="个人介绍一名来自湖北武汉的运维开发工程师，个人爱好很多，比如算法，单片机（创业方向：少儿编程），Linux内核 python，以及很多很多的东西。但是都不怎么专，半桶水的样子。 希望以后一直在运维行业内呆着。可能写一些自己平台。或者好用的工具。但是自己的定位还是运维。  短期计划1.尝试深入理解Linux内核，独立编写一个简单的内核 2.一周两个算法AJ题目。持续下去 3.一周看四个小时以上的书">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1"></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.0.1"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value>
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>jame_xhs</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/jxhsjxhs" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="email" href="mailto:jame_xhs@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=360792760&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88151013" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(32)</small></div></li>
    
        
            
            <li><div data-rel="杂项">杂项<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="容器">容器<small>(8)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ubuntu">ubuntu<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="虚拟化">虚拟化<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="nginx">nginx<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="编程">编程<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="系统">系统<small>(4)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="算法专栏">算法专栏<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="git">git<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="面试题专栏">面试题专栏<small>(1)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="32">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://blog.charleslv.me/">铁伟</a></li>
            
            <li><a target="_blank" href="https://blog.k-8s.com/">耗子</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">mac</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">docker</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">ubuntu优化</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">hexo</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">k8s</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">kvm</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">nginx</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">golang</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">k8s,nfs</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">podman,docker</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">windows</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">方案</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">系统</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">负载</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">git</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">网络</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class=""
           href="/2019/07/30/5-分钟带你搞定-Redis-复制/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="5 分钟带你搞定 Redis 复制">5 分钟带你搞定 Redis 复制</span>
            <span class="post-date" title="2019-07-30 11:41:18">2019/07/30</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/09/12/9月有感/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="9月有感">9月有感</span>
            <span class="post-date" title="2019-09-12 20:17:53">2019/09/12</span>
        </a>
        
        <a  class=""
           href="/2019/09/12/Kuma/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Kuma">Kuma</span>
            <span class="post-date" title="2019-09-12 20:24:02">2019/09/12</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/08/09/Mac-brew-特别慢-解决方案/"
           data-tag="mac"
           data-author="" >
            <span class="post-title" title="Mac brew 特别慢 解决方案 ">Mac brew 特别慢 解决方案 </span>
            <span class="post-date" title="2019-08-09 14:09:35">2019/08/09</span>
        </a>
        
        <a  class="容器 "
           href="/2019/10/18/ORI-or-OCI-？/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="ORI  or OCI ？">ORI  or OCI ？</span>
            <span class="post-date" title="2019-10-18 16:10:21">2019/10/18</span>
        </a>
        
        <a  class="ubuntu "
           href="/2019/08/11/Ubuntu桌面版优化/"
           data-tag="ubuntu优化"
           data-author="" >
            <span class="post-title" title="Ubuntu桌面版优化">Ubuntu桌面版优化</span>
            <span class="post-date" title="2019-08-11 12:53:11">2019/08/11</span>
        </a>
        
        <a  class="容器 "
           href="/2019/07/28/docker运行容器后agetty进程cpu占用率100/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="docker运行容器后agetty进程cpu占用率100%">docker运行容器后agetty进程cpu占用率100%</span>
            <span class="post-date" title="2019-07-28 14:23:32">2019/07/28</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/10/25/hexo换电脑怎么继续写作/"
           data-tag="hexo"
           data-author="" >
            <span class="post-title" title="hexo换电脑怎么继续写作">hexo换电脑怎么继续写作</span>
            <span class="post-date" title="2019-10-25 00:00:32">2019/10/25</span>
        </a>
        
        <a  class=""
           href="/2019/10/17/istio/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="istio">istio</span>
            <span class="post-date" title="2019-10-17 10:11:05">2019/10/17</span>
        </a>
        
        <a  class="容器 "
           href="/2019/07/29/kubernetes-ingress之nginx-ingress/"
           data-tag="k8s"
           data-author="" >
            <span class="post-title" title="kubernetes ingress之nginx-ingress">kubernetes ingress之nginx-ingress</span>
            <span class="post-date" title="2019-07-29 15:56:12">2019/07/29</span>
        </a>
        
        <a  class="虚拟化 "
           href="/2019/07/31/kvm-虚拟机修改ip地址/"
           data-tag="kvm"
           data-author="" >
            <span class="post-title" title="kvm 虚拟机修改ip地址">kvm 虚拟机修改ip地址</span>
            <span class="post-date" title="2019-07-31 23:20:18">2019/07/31</span>
        </a>
        
        <a  class=""
           href="/2019/07/30/netfilter-和-iptables/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="netfilter 和 iptables">netfilter 和 iptables</span>
            <span class="post-date" title="2019-07-30 23:03:01">2019/07/30</span>
        </a>
        
        <a  class="nginx "
           href="/2019/08/06/nginx瑞士军刀-lua/"
           data-tag="nginx"
           data-author="" >
            <span class="post-title" title="nginx瑞士军刀-lua">nginx瑞士军刀-lua</span>
            <span class="post-date" title="2019-08-06 13:27:11">2019/08/06</span>
        </a>
        
        <a  class="编程 "
           href="/2019/10/27/使用client-go包访问KubernetesCRD/"
           data-tag="golang"
           data-author="" >
            <span class="post-title" title="使用client-go包访问KubernetesCRD">使用client-go包访问KubernetesCRD</span>
            <span class="post-date" title="2019-10-27 02:53:16">2019/10/27</span>
        </a>
        
        <a  class="容器 "
           href="/2019/10/27/利用动态存储卷StorageClass使用nfs/"
           data-tag="k8s,nfs"
           data-author="" >
            <span class="post-title" title="利用动态存储卷StorageClass使用nfs">利用动态存储卷StorageClass使用nfs</span>
            <span class="post-date" title="2019-10-27 02:36:56">2019/10/27</span>
        </a>
        
        <a  class="容器 "
           href="/2019/10/19/动手实践podman/"
           data-tag="podman,docker"
           data-author="" >
            <span class="post-title" title="动手实践podman">动手实践podman</span>
            <span class="post-date" title="2019-10-19 23:24:16">2019/10/19</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/11/04/怎么优雅快速激活windows10/"
           data-tag="windows"
           data-author="" >
            <span class="post-title" title="怎么优雅快速激活windows10">怎么优雅快速激活windows10</span>
            <span class="post-date" title="2019-11-04 12:06:31">2019/11/04</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/11/11/怎么写好一个技术方案/"
           data-tag="方案"
           data-author="" >
            <span class="post-title" title="怎么写好一个技术方案">怎么写好一个技术方案</span>
            <span class="post-date" title="2019-11-11 17:49:51">2019/11/11</span>
        </a>
        
        <a  class="系统 "
           href="/2019/07/25/性能判断专栏/"
           data-tag="系统"
           data-author="" >
            <span class="post-title" title="性能判断专栏">性能判断专栏</span>
            <span class="post-date" title="2019-07-25 20:54:52">2019/07/25</span>
        </a>
        
        <a  class="容器 "
           href="/2019/10/14/是时候替换你的docker了/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="是时候替换你的docker了">是时候替换你的docker了</span>
            <span class="post-date" title="2019-10-14 17:30:59">2019/10/14</span>
        </a>
        
        <a  class=""
           href="/2019/11/15/树莓派zerow使用/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="树莓派zerow使用">树莓派zerow使用</span>
            <span class="post-date" title="2019-11-15 16:53:15">2019/11/15</span>
        </a>
        
        <a  class="容器 "
           href="/2019/08/05/浅谈dockerd、contaierd、containerd-shim、runC之间的关系/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="浅谈dockerd、contaierd、containerd-shim、runC之间的关系">浅谈dockerd、contaierd、containerd-shim、runC之间的关系</span>
            <span class="post-date" title="2019-08-05 10:52:41">2019/08/05</span>
        </a>
        
        <a  class="容器 "
           href="/2019/10/25/用nfs作为k8s持久化存储/"
           data-tag="k8s,nfs"
           data-author="" >
            <span class="post-title" title="用nfs作为k8s持久化存储">用nfs作为k8s持久化存储</span>
            <span class="post-date" title="2019-10-25 13:57:26">2019/10/25</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/11/02/科学上网之-自己动手丰衣足食/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="科学上网之-自己动手丰衣足食">科学上网之-自己动手丰衣足食</span>
            <span class="post-date" title="2019-11-02 14:18:22">2019/11/02</span>
        </a>
        
        <a  class="算法专栏 "
           href="/2019/07/19/算法专栏/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="算法专栏">算法专栏</span>
            <span class="post-date" title="2019-07-19 16:03:54">2019/07/19</span>
        </a>
        
        <a  class="系统 "
           href="/2019/07/19/系统网络篇/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="系统网络篇">系统网络篇</span>
            <span class="post-date" title="2019-07-19 13:59:54">2019/07/19</span>
        </a>
        
        <a  class="系统 "
           href="/2019/07/22/系统负载/"
           data-tag="负载"
           data-author="" >
            <span class="post-title" title="系统负载">系统负载</span>
            <span class="post-date" title="2019-07-22 22:18:27">2019/07/22</span>
        </a>
        
        <a  class="git "
           href="/2019/10/22/练习2年的git练习生/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="练习2年的git练习生">练习2年的git练习生</span>
            <span class="post-date" title="2019-10-22 11:10:52">2019/10/22</span>
        </a>
        
        <a  class="系统 "
           href="/2019/07/19/网络/"
           data-tag="网络"
           data-author="" >
            <span class="post-title" title="网络">网络</span>
            <span class="post-date" title="2019-07-19 16:06:52">2019/07/19</span>
        </a>
        
        <a  class=""
           href="/2019/08/30/论营销/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="论营销">论营销</span>
            <span class="post-date" title="2019-08-30 11:07:54">2019/08/30</span>
        </a>
        
        <a  class="杂项 "
           href="/2019/10/24/运维神器tmux/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="运维神器tmux">运维神器tmux</span>
            <span class="post-date" title="2019-10-24 08:56:41">2019/10/24</span>
        </a>
        
        <a  class="面试题专栏 "
           href="/2019/07/19/面试题专栏/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="面试题专栏">面试题专栏</span>
            <span class="post-date" title="2019-07-19 16:03:43">2019/07/19</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-docker运行容器后agetty进程cpu占用率100" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">docker运行容器后agetty进程cpu占用率100%</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a href="javascript:" data-rel="容器">容器</a>
            
        </span>
        
        
        <span class="tag">
            
            <a href="javascript:" class="color2">docker</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2019-11-15 15:55:04'>2019-07-28 14:23</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#引用-google-到的一段话："><span class="toc-text">引用 google 到的一段话：</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>最近在使用 docker 容器的时候，发现宿主机的 agetty 进程 cpu 占用率达到 100%。<br><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g864u6hjoxj31k00ikjwt.jpg" alt="负载图"></p>
</blockquote>
<p>在 Google 上搜了下，引起这个问题的原因是在使用”docker run”运行容器时使用了 “/sbin/init”和”–privileged”参数。</p>
<p>使用/sbin/init 启动容器并加上–privileged 参数，相当于 docker 容器获得了宿主机的全权委托权限。这时 docker 容器内部的 init 与宿主机的 init 产生了混淆。</p>
<h3 id="引用-google-到的一段话："><a href="#引用-google-到的一段话：" class="headerlink" title="引用 google 到的一段话："></a>引用 google 到的一段话：</h3><blockquote>
<p>I’ve done all my testing on them without using –privileged, especially since that’s so dangerous (effectively, you’re telling this second init process on your system that it’s cool to go ahead and manage your system resources, and then giving it access to them as well). I always think of –privileged as a hammer to be used very sparingly.</p>
</blockquote>
<hr>
<p>出于对安全的考虑，在启动容器时，docker 容器里的系统只具有一些普通的 linux 权限，并不具有真正 root 用户的所有权限。而–privileged=true 参数可以让 docker 容器具有 linux root 用户的所有权限。</p>
<p>为了解决这个问题，docker 后来的版本中 docker run 增加了两个选项参数”–cap-add”和”–cap-drop”。</p>
<p>–cap-add : 获取 default 之外的 linux 的权限</p>
<p>–cap-drop: 放弃 default linux 权限</p>
<blockquote>
<p>所以，在运行容器时，可以不用–privileged 参数的尽量不用，用–cap-add 参数替代。如果必须使用–privileged=true 参数的，可以通过在宿主机和容器中执行以下命令将 agetty 关闭。<br>shell&gt; systemctl stop <a href="mailto:getty@tty1.service" target="_blank" rel="noopener">getty@tty1.service</a><br>shell&gt; systemctl mask <a href="mailto:getty@tty1.service" target="_blank" rel="noopener">getty@tty1.service</a></p>
</blockquote>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jame_xhs@163.com </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>docker运行容器后agetty进程cpu占用率100%</p>
    
    <p><span class="copy-title">本文作者:</span><a href="javascript:void(0)" title="jame_xhs">jame_xhs</a></p>
    <p><span class="copy-title">发布时间:</span>2019-07-28, 14:23:32</p>
    <p><span class="copy-title">最后更新:</span>2019-11-15, 15:55:04</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2019/07/28/docker运行容器后agetty进程cpu占用率100/" title="docker运行容器后agetty进程cpu占用率100%">http://www.jxhs.me/2019/07/28/docker运行容器后agetty进程cpu占用率100/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2019 jame_xhs</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>

</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#mac','#docker','#ubuntu优化','#hexo','#k8s','#kvm','#nginx','#golang','#k8s,nfs','#podman,docker','#windows','#方案','#系统','#负载','#git','#网络',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.6;
        background: url("https://tva1.sinaimg.cn/large/006y8mN6gy1g863v2zfvoj31900u0qv7.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
